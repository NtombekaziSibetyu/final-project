(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,t,a){e.exports=a(64)},56:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),c=a.n(l),o=a(8),s=a.n(o),i=a(14),u=a(2),m=(a(56),function(){return r.a.createElement("div",{className:"topnav",id:"myTopnav"},r.a.createElement(i.b,{to:"/"},"Home"),r.a.createElement(i.b,{to:"/about"},"About"),r.a.createElement(i.b,{to:"/login"},"Login"),r.a.createElement("a",{href:"#",className:"icon"},r.a.createElement("i",{class:"fa fa-bars",onClick:function(){var e=document.getElementById("myTopnav");"topnav"===e.className?e.className+=" responsive":e.className="topnav"}})))}),p=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Wellness Clinic"),r.a.createElement("h4",null,"Login to book an appointment"),r.a.createElement("div",{className:"slide-container"},r.a.createElement("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQ4T_OK0JA7vIVUn1_nFMMfB_zFLWbOPjLuOg&usqp=CAU",alt:"home",style:{width:"100%"}})),r.a.createElement("div",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fa-clock-square"}),"  Working Hours "),r.a.createElement("p",null,"Monday - Thursday : 08h00 - 19h00  "),r.a.createElement("p",null,"Friday : 08h00 - 18h00"),r.a.createElement("p",null,"Saturday  and Sunday : 09h00 -16h00")),r.a.createElement("div",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fa-map-marker"}),"  Address "),r.a.createElement("p",null,"238 Dassuty Road"),r.a.createElement("p",null,"Cape Town"),r.a.createElement("p",null,"Western Cape")))},d=a(11),E=a(1),b=a(10),f=Object(n.createContext)(),h=function(e){var t=Object(n.useContext)(f),a=t.authorised,l=t.register,c=t.error,o=t.removeErrors;Object(n.useEffect)((function(){a&&e.history.push("/bookings"),"The ID number you have entered is already registered/ belongs to someone else"===c&&(alert("User cannot be registered"),o())}),[a,c,e.history]);var s=Object(n.useState)({name:"",identityNo:"",email:"",phone:"",address:""}),i=Object(b.a)(s,2),u=i[0],m=i[1],p=u.name,h=u.identityNo,g=u.email,v=u.phone,y=u.address,O=function(e){return m(Object(E.a)(Object(E.a)({},u),{},Object(d.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(u)},className:"form"},r.a.createElement("h1",null,"Register "),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Fullname"),r.a.createElement("input",{type:"text",name:"name",value:p,onChange:O,required:!0,placeholder:"Fullname"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"identityNo"},"ID Number"),r.a.createElement("input",{type:"number",name:"identityNo",minLength:"13",value:h,onChange:O,placeholder:"enter ID number",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",value:g,onChange:O,placeholder:"Email",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"phone"},"Phone"),r.a.createElement("input",{type:"text",name:"phone",value:v,minLength:"10",onChange:O,required:!0,placeholder:"Phone"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"address"},"Physical Address"),r.a.createElement("input",{type:"text",name:"address",value:y,onChange:O,required:!0})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-block",type:"submit"},"Register"))))},g=a(4),v=a.n(g),y=a(12),O=function(e){e?s.a.defaults.headers.common["x-auth-token"]=e:delete s.a.defaults.headers.common["x-auth-token"]},N=function(e,t){switch(t.type){case"GET_PATIENT":return Object(E.a)(Object(E.a)({},e),{},{authorised:!0,patient:t.payload});case"REGISTER":case"LOGIN":return localStorage.setItem("token",t.payload),Object(E.a)(Object(E.a)(Object(E.a)({},e),t.payload),{},{authorised:!0});case"REGISTER_ERROR":case"LOGIN_ERROR":return Object(E.a)(Object(E.a)(Object(E.a)({},e),t.payload),{},{authorised:!1,patient:null});case"REMOVE_ERRORS":return Object(E.a)(Object(E.a)({},e),{},{error:null});case"LOGOUT":return localStorage.removeItem("token"),Object(E.a)(Object(E.a)({},e),{},{token:null,authorised:!1,patient:null});default:return e}},k=function(e){var t=[{token:localStorage.getItem("token"),authorised:!1,patient:null,error:null}],a=Object(n.useReducer)(N,t),l=Object(b.a)(a,2),c=l[0],o=l[1],i=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&O(localStorage.token),e.prev=1,e.next=4,s.a.get("/api/bookings");case 4:t=e.sent,o({type:"GET_PATIENT",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={headers:{"Content-Type":"application/json"}};try{n=s.a.post("/api/patients",t,a),o({type:"REGISTER",payload:n.data}),i()}catch(r){o({type:"REGISTER_ERROR",payload:r.response.data.msg})}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,s.a.post("/api/auth",t,a);case 4:n=e.sent,o({type:"LOGIN",payload:n.data}),i(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:"LOGIN_ERROR",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(f.Provider,{value:{token:c.token,authorised:c.authorised,loading:c.loading,user:c.user,error:c.error,SettingToken:O,register:u,showPatient:i,logIn:m,logout:function(){return o({type:"LOGOUT"})},removeErrors:function(){return o({type:"REMOVE_ERRORS"})}}},e.children)},j=function(e){var t=Object(n.useContext)(f),a=t.authorised,l=t.logIn,c=t.error,o=t.removeErrors;Object(n.useEffect)((function(){a&&e.history.push("/bookings"),"invalid credentials"===c&&(alert("User cannot be registered"),o())}),[a,c,e.history]);var s=Object(n.useState)({name:"",identityNo:""}),i=Object(b.a)(s,2),u=i[0],m=i[1],p=u.name,h=u.identityNo,g=function(e){return m(Object(E.a)(Object(E.a)({},u),{},Object(d.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement("h4",null,"Not registered?"),r.a.createElement("a",{href:"/register"},"Register here")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),(p||""===h)&&(document.body.innerHTML="<"),l(u)},className:"form"},r.a.createElement("h3",null,"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Fullname"),r.a.createElement("input",{type:"text",name:"name",value:p,onChange:g,placeholder:"fullname",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"identityNo"},"Password"),r.a.createElement("input",{type:"number",name:"identityNo",value:h,onChange:g,minLength:"13",placeholder:"enter ID number",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-block",type:"submit"},"Login"))))},R=Object(n.createContext)(),T=function(){var e=Object(n.useContext)(R).makeAppointment;Object(n.useEffect)((function(){c({type:"",date:""})}),[]);var t=Object(n.useState)({type:"",date:""}),a=Object(b.a)(t,2),l=a[0],c=a[1],o=l.type,s=l.date,i=function(e){return c(Object(E.a)(Object(E.a)({},l),{},Object(d.a)({},e.target.name,e.target.value)))};return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e(l)},className:"form"},r.a.createElement("h3",null,"Book an appointment"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"type"},"Type"),r.a.createElement("input",{type:"text",id:"type",name:"type",onChange:i,value:o,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"},"Appointment Date"),r.a.createElement("input",{type:"datetime",name:"date",id:"date",value:s,onChange:i,required:!0})),r.a.createElement("div",{className:"form-btn"},r.a.createElement("button",{type:"submit",className:"btn btn-block"},"Book Appointment")))},x=function(e){var t=e.booking,a=Object(n.useContext)(R),l=a.getAppointments,c=a.cancelAppointments,o=t._id,s=t.type,i=t.date;Object(n.useEffect)((function(){l()}),[]);return r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Your Appointments"),r.a.createElement("button",{className:"btn btn-right"},"New Appointment"),r.a.createElement("div",{className:"card"},r.a.createElement("h3",{className:"text text-left"},"Appointment Type : ",s),r.a.createElement("h3",{className:"text text-left"},"Date and Time : ",i),r.a.createElement("p",null,r.a.createElement("button",{className:"btn btn-dark",onClick:function(){c(o)}}," Cancel "))))},I=function(){var e=Object(n.useContext)(R),t=Object(n.useContext)(f),a=e.bookings,l=t.logout;return r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"btn",style:{float:"right"},onClick:function(){l()}}," Log out"),0!==a.length?a.map((function(e){return r.a.createElement(x,{booking:e})})):r.a.createElement(T,null))},A=a(33),C=function(e,t){switch(t.type){case"ADD_APPOINTMENT":return Object(E.a)(Object(E.a)({},e),{},{bookings:[t.payload].concat(Object(A.a)(e.bookings))});case"GET_APPOINTMENTS":return Object(E.a)(Object(E.a)({},e),{},{bookings:t.payload});case"DELETE_APPOINTMENT":return Object(E.a)(Object(E.a)({},e),{},{bookings:e.bookings.filter((function(e){return e._id!==t.payload}))});default:return e}},S=function(e){var t=Object(n.useReducer)(C,{bookings:[],appointments:[],error:!1}),a=Object(b.a)(t,2),l=a[0],c=a[1],o=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/bookings");case 3:t=e.sent,c({type:"GET_APPOINTMENTS",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"BOOKING_ERROR",payload:e.t0.response.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,s.a.post("api/bookings",t,a);case 4:n=e.sent,c({type:"ADD_APPOINTMENT",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"BOOKING_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.delete("/api/bookings/".concat(t));case 3:c({type:"DELETE_APPOINTMENT",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c({type:"BOOKING_ERROR",payload:e.t0.response.msg});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(R.Provider,{value:{bookings:l.bookings,appointments:l.appointments,error:l.error,cancelAppointments:u,makeAppointment:i,getAppointments:o}},e.children)},w=(a(63),function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("ul",null,r.a.createElement("li",null,"Copyright@ clinic-booking"),r.a.createElement("li",null,r.a.createElement("i",{class:"fas fa-facebook"})),r.a.createElement("li",null,r.a.createElement("i",{class:"fas fa-twitter"})),r.a.createElement("li",null,r.a.createElement("i",{class:"fas fa-envelope"}))))});localStorage.token&&O(localStorage.token);var P=function(){return r.a.createElement(k,null,r.a.createElement(S,null,r.a.createElement(i.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(m,null),r.a.createElement("div",{className:"App center"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:p}),r.a.createElement(u.a,{exact:!0,path:"/about",component:p}),r.a.createElement(u.a,{exact:!0,path:"/login",component:j}),r.a.createElement(u.a,{exact:!0,path:"/register",component:h}),r.a.createElement(u.a,{exact:!0,path:"/bookings",component:I}))),r.a.createElement(w,null)))))};c.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.5a89b115.chunk.js.map